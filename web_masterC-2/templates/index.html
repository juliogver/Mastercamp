<!DOCTYPE html>
<html>
  <head>
    <title>MoodIT</title>
    <link href="../static/styles.css" rel="stylesheet">
    <script>
      function showLoadingSpinner() {
        document.getElementById('loadingGif').style.display = 'block';
        const formData = new FormData(document.getElementById('uploadForm'));
        const xhr = new XMLHttpRequest();
        xhr.open('POST', '/upload', true);
        xhr.onload = function() {
          if (xhr.status === 200) {
            document.getElementById('loadingGif').style.display = 'none';
            // Redirect to the /result page
            window.location.href = '/result';
          } else {
            console.log('An error occurred');
          }
        };
        xhr.send(formData);
      }
      
    
      
      
    </script>
  </head>
  <body>
    <header class="header">
      <div class="header__container">
        <div class="header__logo">
          <a class="logo-link" href="/">
            <img src="../static/logo.png" alt="Logo" class="logo-image">
          </a>
        </div>
  
        <nav class="header__nav">
          <ul class="nav-list">
            <li class="nav-list__item">
          
            </li>
          </ul>
        </nav>
  
      </div>
    </header>
  
    <section class="hero">
      <div class="analyze-section">
        <div class="hero__container">
          <h1 class="hero__title">
            Analyze your dataset.
          </h1>
          <p class="hero__description">
            Thanks to our system, you'll be able to analyze the sentiments from the comments of your dataset.
          </p>
          <form id="uploadForm" class="hero__actions">
            <label for="csvFileInput" class="button button-primary" class="file-upload">
              Upload CSV
              <input type="file" name="file" id="csvFileInput" accept=".csv" class="hidden">
            </label>
            <button type="button" class="button button-primary" onclick="showLoadingSpinner()">Analyze Comments</button>
          </form>
          <div class="loader" id="loadingGif" style="display: none;">
            <svg width="0" height="0">
              <filter id="gooey-plasma">
                   <feGaussianBlur in="SourceGraphic" stdDeviation="20" result="blur"/>
                   <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -16" result="goo" />
               </filter>
             </svg>
             <div class="plasma">
               <div class="gooey-container">
                 <span class="bubble"></span>
                 <span class="bubble"></span>
                 <span class="bubble"></span>
                 <span class="bubble"></span>
                 <span class="bubble"></span>
                 <span class="bubble"></span>
               </div>
             </div>
             <div class="loading-text">
              Loading<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>
            </div>
          </div>
          
          
          
          <div id="chartContainer" class="chart"></div>
        </div>
      </div>
    </section>
    
    <footer class="footer">
      <div class="footer__container">
        <div class="footer__logo">
          <img src="../static/logo.png" alt="Logo" class="footer__logo-image">
        </div>
        <nav class="footer__nav">
          <ul class="footer-nav__list">
            <li class="footer-nav__item">
              
            </li>
          </ul>
        </nav>
        <p class="footer__copy">
          &copy; 2022. All rights reserved.
        </p>
      </div>
    </footer>
  </body>
</html>

